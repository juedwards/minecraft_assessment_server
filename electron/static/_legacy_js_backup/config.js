// WebSocket configuration
// This file is dynamically generated by the server
(function () {
    // Default to host derived from the page when served over HTTP(S)
    var host = window.location.hostname || 'localhost';
    var port = 8081;

    // If running inside Electron (preload exposes DESKTOP_ENV) or loaded via file://,
    // prefer a localhost backend so the bundled Python server can be contacted.
    try {
        var isElectron = (typeof window.DESKTOP_ENV !== 'undefined' && window.DESKTOP_ENV && window.DESKTOP_ENV.isElectron) || (navigator && navigator.userAgent && navigator.userAgent.indexOf('Electron') !== -1);
        if (isElectron || window.location.protocol === 'file:') {
            host = 'localhost';
        }
    } catch (e) {
        // fall back to default
    }

    window.WS_CONFIG = {
        host: host,
        port: port,
        httpPort: 8080
    };
})();
